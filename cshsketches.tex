\documentclass{tac}
\usepackage{amssymb, amsmath}
\usepackage[backend=bibtex,citestyle=authoryear-icomp]{biblatex}
\usepackage[all]{xy}
\usepackage{url}

\title{Constructive Simplicial Homotopy}
\author{Wouter Pieter Stekelenburg}
\copyrightyear{2015,2016,2017}
\address{Faculty of Mathematics, Informatics and Mechanics\\
University of Warsaw\\
Banacha 2\\
02-097 Warszawa\\
Poland}
\eaddress{w.p.stekelenburg@gmail.com}
\keywords{realizability, simplicial homotopy, Kan complexes}
\amsclass{03D80, 18G30, 18G55}

\newcommand\hide[1]{}
\newcommand\cat\mathcal
\newcommand\set[1]{\left\{#1\right\}}
\mathrmdef{id}
\mathrmdef{dom}
\mathrmdef{cod}
\newcommand\ri{^*}
\newcommand\N{\mathbb N}
\mathbfdef[nno]{N}
\newcommand\dual{^{\mathrm{op}}}
\mathbfdef[simCat]\Delta
\newcommand\s{^{\simCat\dual}}
\newcommand\bang{!}
\newcommand\of{:}
\newcommand\simplex\Delta
\newcommand\cycle{\partial\Delta}
\newcommand\horn\Lambda
\newcommand\f{_f}
\newcommand\tuplet[1]{\left\langle #1 \right\rangle}
\newcommand\true{\mathtt{true}}
\newcommand\false{\mathtt{false}}
\newcommand\bool{\mathtt{bool}}
\mathrmdef{nat}
\mathssbxdef{Ar}
\mathssbxdef{Ob}
\newcommand\pp{\mathbin\diamond}
\newcommand\norm[1]{\Vert #1 \Vert}
\newcommand\ka\kappa
\newcommand\la\lambda
\mathrmdef{face}
\mathrmdef{colim}
\newcommand\ex{_{\textrm{ex}}}
\newcommand\citep[1]{[\cite{#1}]}
\mathrmdef{dim}
\newcommand\base{\mathbf{U}}
\mathssbxdef[sub]{Sub}
\newcommand\ambient{\mathfrak A}
\mathrmdef{uni}
\newcommand\disc{_{\rm disc}}
\mathrmdef{filler}
\newcommand\traco\omega

\newcommand\product[2]{\Pi #1 \mapsto #2}
\newcommand\coproduct[2]{\Sigma #1 \mapsto #2}
\newcommand\function[2]{\lambda #1 \mapsto #2}

\newcommand\keyword[1]{\emph{#1}\label{#1}}



\begin{document}

\section{22/9/17}
The inclusion that must be an acyclic cofibration is:
\[ \bigcup_{i\neq a,j\neq b}(U_j\cap V_i) \to \bigcup_{j\neq b}U_j\]
The problem face is $U_{\beta(a)}$ because it lack the point $a$. All the $V_j$ contain $a$. The other faces $U_i$ contain it. So in that case we go by dimension to add the faces. Any surprises here?

This clears once thing up: the ordering of $S\tuplet{\beta,b}$. The posets are joined in a way that make it contractible--i.e. that its nerve is a contractible simplicial set. If we take the coproduct $\dom\beta$ and $B = \prod_{i\neq b}\set{j\of\dom\beta|\beta(j)=i}$ we wont get this property. We put $B$ above $b$ in $\cod\beta$ to make sure that pullbacks preserve it. So if we are going to connect $B$, it must be at the same level as $\beta_b = \set{j\of\dom\beta|\beta(j)=b}$. A by-pass would turn the poset in-contractible, so we need to pick place in $\beta_b$ to insert $B$. The canonical places are the top and the bottom.

Now when we seek to fill out $U_j$ for $j\neq b$ and $j\neq \beta(a)$ we
have $a\of V_i\cap U_j$ for $i\neq a$ from which we go up by dimension. 
In these cases, the inclusion $\bigcup_{i\neq a} V_i\cap U_j \to U_j$ is
mostly about $B$: $V_i$ miss points in $B$ that $U_j$ contains. Going up dimension by dimension may be overdoing it, but is far simpler than figuring out which points are missing. So we reduce the case of a monic monotone map $[n + 1]\to U_j$ to the cases where $[n]\to U_j$ all the way down to $a:[0]\to U_j$, all needing to have in common that $a$ is in there. I don't see how we can fail.


Obviously, if $b=\beta(a)$ we are done. Only if $b\neq\beta(a)$ we are left with a troubled face $U_{\beta(a)}$ to glue in. Why troubled? The pieces $U_{\beta(a)}\cap V_j$ for $j\neq a$ are connected, but may not have a single point in common. That is why we introduced the helpers $W$.

We are still considering faces $[n]\to U_{\beta(a)}$. We want to reduce the case $[n + 1]\to U_{\beta(a)}$ to cases where $[n]\to U_{\beta(a)}$, but we need to be more careful this time because of shifting
base points.
Just like we ignore faces that don't contain $a$ in the first example, we should probably ignore faces that don't contain all of $B$ this time.

At this point we indeed keep arguing that some faces are present because
greater faces have been added at an earlier stage, perhaps even as part of filling out $U_j$.

I am working towards an alternative to dimension for $f:[n]\to U_{\beta(a)}$. Take the sum of $f(i)$ where $f(i)$ is not a member $B$ e.g.
This is going put a lot of distance between $f$ while clustering others together. Removing a point generally reduces the sum (unless $f(i) = 0$ unfortunately). 

You know what? Just focus on faces $f:[n]\to \dom(\beta)$ and do a similar trick, i.e. $|f| = n + \sum_{i\of [n]} f(i)$. We
will be looking for a way to add all of $S\tuplet{\beta,b}(f)$ and the
idea is that we can do induction over $|f|$. After all, $f\circ d_i$ all have lower norms. A, but we still need to pick a base point!

Let's not be stingy and just say what we want.
For each $j\of \cod(\beta)$ there is a least $i$ such that $i \geq f(k)$ whenever $\beta(f(k)) = j$. These least $i$ both determine the base point we will use, and the stage of
construction at which $S\tuplet{\beta,b}(f)$ can be glued on. We would
like to deal with the fact that we are not starting from $1$ in each fibre of $\beta$, but that might not be a big problem in the proof. We do have to be careful about dimension.

\paragraph{Recap}
Outline of the new descend chapter:
\begin{enumerate}
\item Introduce the descend functor and its left adjoint.
We are dealing with slice categories here, and explaining the functor
already involves nerves of posets, presumably. We have to deal with general theories that connect slice categories to categories of elements. Moreover, we lift functors using all structure of $\ambient$ at our convenience.
\item Prove that descend is right inverse to reindexing and prove the preservation of modest fibrations.
Both should follow easily form the definitions.
\item Reduce the problem of preserving fibrations to the problem of showing that a single family of morphisms is acyclic.
The definition of contractible morphism should help here, though we juggle many diagrams to get where we need.
\item Proof that this family of morphism is indeed acyclic.
This is what I am struggling with now.
\end{enumerate}

The basic tactic is to assign each face $[n]\to\bigcup_{j\neq b}U_j$ a turn to be included, in such a way that the turn of $f:[n + 1]\to\bigcup_{j\neq b}U_j$ comes after those of $f\circ d_i:[n + 1]\to\bigcup_{j\neq b}U_j$.

Some general principles for computing terms: 
If $f$ hits $\lambda(a)$, its dimension is its turn.
If $f$ can be extended to a $g$ that contains $\lambda(a)$, its dimension plus 1 is its turn.
The remainder either intersects $B$ or can be extended to extend it. They must be part of $U_{\beta(a)}$ and have a fair number of dimensions to avoid inclusion in $U_j$ for $j\neq \beta(a)$. In fact, $\cod(\beta) - 2$ is the least, considering that $s\tuplet{\beta,b}\circ f$ must hit every point in $\cod(\beta)$ except $\beta(a)$ and $b$.
The rule is similar: hitting a number of points in $B$ qualifies $f$ for inclusion at a certain stage. Fewer points means $f$ will only be included indirectly. Since $V_j$ don't contain all of $B$ only working with simplices to contain all of $B$ may not work however.

The old approach put all members of $B$ in order and demanded that a downset be included in the construction. We threw out this demand. What does that do to the stages?

The least thing we can demand of $f$ is that it includes all its support points. For each monic $m\of[\cod(\beta) - 2]\to [\dom(f)]$ such that $s\tuplet{\beta,b}\circ m = d_{\beta(\alpha), b}$ there is a point $x\of B$ such that $x_m(i) = f(m(i))$, $x_m(\beta(a)) = a$. We demand the inclusion of these in the image of $f$. This determines the inclusion stage.
This leaves us without a obvious pivot however.

We could add a combination of two demands. Firstly, there is a point $x\of B$ such that $f$ contains all points $y\of B$ such that $y\leq x$.
Secondly, $f(i) \leq x_{s(\beta,b)(f(i))}$. We still use dimensions to stage these, seeing as the number of point necessary bumps up the dimension of $f$ quite a lot. But can we glue this one in now?
 
\paragraph{reviewing the old proof}
Without the total ordering of $B$, there are a lot more morphisms to take in account there. If we follow the same tactics as before we simply demand that $f$ hits all points of $B$, however.
Now the rule for this family of morphisms is that $f$ comes after $g$ if $f\geq g$. So that is something to bump the stage up for.

Let's review: a face $f\of [n]\to U_{\beta(a)}$ cannot be extended to contain $a$. We therefore need to glue it, using its faces of codimension 1. The morphism $f$ has at least one pivot point to work with. Trading points with $a$ suggests a minimum of dimension plus 2-- --but would that work for points of $B$ that $f$ hits?
For each point that $f$ hits in $B$, first remove that point. That becomes a new target. We get the same analysis: outside of $B$ we can switch points with $a$ to get them at a stage of minimally dimension plus 2, and adding the dimensional we already have, the stages becomes plus 3. Hence the general rule seems to add at least the number of points in $B$ that $f$ hits to the dimension, but they do this themselves don't they? Dimension plus 2 seems sufficient.

I now get something like this. A face $f\of [n] \to \bigcup_{j\neq b}U_j$ belongs to stage $n$ if $f(i) = a$ for some $i\of [n]$. It belong to stage $n + 1$, if $(f \leftarrow a)$ is a function $[n + 1] \to \bigcup_{j\neq b}U_j$. Here:
\begin{align*}
(f \mathop\leftarrow a) (i) &= f(i) \textrm{ if } f(i) < a\\
(f \mathop\leftarrow a) (i) &= a \textrm{ if } f(i) > a, f(i - 1) < a \\
(f \mathop\leftarrow a) (i) &= f(i - 1) \textrm{ if } f(i - 1) > a
\end{align*}
Finally it belongs to stage $n + 2$ if $(f \leftarrow a)$ isn't a member of $\bigcup_{j\neq b}U_j$.

The stages are subsets $A_i$ of $\bigcup_{j\neq b}U_j$ and supersets of $\bigcup_{i\neq a,j\neq b}(U_j\cap V_i)$ defined as unions of various stages according to the classification just made. We show that $A_0 = \bigcup_{i\neq a,j\neq b}(U_j\cap V_i)$, that $A_u = \bigcup_{j\neq b}U_j$ for some $u\geq\#S\tuplet{\beta,b}+2$. Finally the real issue: is $A_n \to A_{n+1}$ an acyclic cofibration?

We have a good idea of what the new functions are. 
\begin{itemize}
\item For the faces $f$ where $f(i) = a$, all $f\circ d_j$ where $j\neq i$ are of stage $n - 1$.
\item For the faces $f$, if $f \mathord\leftarrow a$ belong to the result, then $f\mathord\leftarrow a$ belongs to the same stage.
\item For the faces that cannot be extended $f\circ d_j$ presumably have only two sorts: those that are extensible, and which therefore life at stage $n$ by the preceding argument, and those which aren't by the induction argument. It doesn't look like we need to be picky with the top edge, pivot etc. anymore.
\end{itemize}

I am missing something crucially important:
It is possible to find too many restrictions at a lower stage!
Precisely one \emph{must} be missing! The first two types of faces shouldn't be a problem because of the $V_j$.
The third type is trouble, however. The reason we don't need to be picky
is the reason why it won't work.

First make another distinction, between those $f$ that already intersect $B$ and those that don't. Those that don't will only be added as part of a face that does at the same stage. For the $f$ that intersect $B$ we presumably pick one of the intersection points as pivot.
We need to pick the top edge that puts $f$ in one way or another. The face of $f$ that lacks edge must have the same stage, and not appear at a low stage.

The old solution was to restrict the points outside of $B$, while including all points inside of $B$. The lexicographical ordering does some strange things here.

Be specific:
\begin{itemize} 
\item Only the intersection $f \cap \lambda\of [m]$ determines what the top edge will be.
\item If $f$ does not contain this top edge, then it will only be added as part of the extension with that top edge, which should always be possible.
\item For pivots other than $a$ we need an offset from the dimension. I have a pretty good idea what it should be, but I need to think about this.
\end{itemize}
Removing point of $f$ inside $B$ either results in removing the top edge, and we are safe from this now. Otherwise nothing important happens. So move on to removing points outside of $f$. This could change the proper top edge. That means that alternative top edges need to go first.

The number of edges I would connect to $f$ is:
$\prod_{j\neq b, j\neq \alpha(b)}\set{i|s\tuplet{\beta,b}(f(i)) = j}$
This is big enough to be the proper dimensional offset.
The canonical choice of pivot is also determined by this product as well: $a$ if the product is empty, the greatest element of the product with $a$ inserted at index $\beta(a)$ otherwise.

I see a proof. I am unsure whether a simpler construction would not suffice, but I have something workable now.

We have three factors that determine that stage:
\begin{itemize}
\item fundamentally dimension.
\item the number of possible top edges in $B$
\item whether the face already contains the chosen top edge, or need to be extended to include it.
\end{itemize}
The last bit is still a puzzler. I think we are safe because counting the number of possible edges in $B$ gives enough room to add all of them if needed. If we subtract the points that $f$ already hits, however, I get the feeling that we are getting the timing perfectly right.

\paragraph{final thoughts}
Perhaps it could be much simpler: glue in the faces according to dimension, just leave out the ones that could get in the way later. With a top edge selection strategy we can actually predict which faces might get in the way later (the ones missing the selected top edge). I have some doubts that this will actually do it for $B$ however.

Suppose $f$ cannot be extended to $a$. We want to make sure removing the top edge result in something not already included in the structure. 
Now we pick a point different from the top edge. How can we be sure that one is included? If the top edge of the less dimension thing is the same, no problem. If the top edge of the less dimensional thing is different, problem. The subface was not included at its stage unless its edge was is part of the current face.

Perhaps we have been too selective: just demand that a face is connected to a shared subset of the leaves. That means $B\cup\set{a}$. In other words, any point of either $a$ or $B$ will do. For many faces the argument that it was glued on relies on extending the face with suitable points. In other cases the intersection proves enough. A, but here we run into the opposite problem: we remove a top edge and find that the sub face was already included. Hence, the inclusion no longer acyclic.

Yet another idea: if $B$ is nonempty, just pick an point and use that one for all faces. At each stage, we just glue in the faces that have this point in it. How could that fail? The base cases might cause trouble now. I think I need Lumsdaine's counterexample to show why that won't work.

\section{9/9/17}
We use the posets $S\tuplet{\beta,b}$ and sub-posets to explain the construction. There are some bigger step we can take: a handful of 'faces' sharing a common vertex, included into a bigger face is an acyclic cofibration. The second stage generalizes form a single vertex to a collection of connected vertices. This way we can both prove descent, but also pushout products.

I think we generally need a strategy to deal with the collection of connected vertices. That prevents useful generalizations.

\section{8/9/17}

\paragraph{Recap}
We wind up with tuplets of five elements in $D\otimes \simplex_P$.
\begin{enumerate}
\item a morphism $\alpha$ that implements a category action.
\item a number $a\of\cod(\alpha)$, which tell us which horn we are trying to preserve.
\item a morphism $\beta$ with $\dom(\beta) = \cod(\alpha)$, which tell us about the target simplex. This hold the most data.
\item a number $b\of \cod(\beta)$ declaring which horn we want to pull back along.
\item a morphism $\sigma$ into the partially ordered object $S\tuplet{\beta\circ \alpha,b}$, which similarly to $\alpha$ is a target for the category action.
\end{enumerate}
The equivalence relation tells us that:
\begin{align*}
\tuplet{\alpha\circ\phi,a,\beta,b,\sigma}&\sim
\tuplet{\alpha,a,\beta,b,s(\phi)\circ\sigma}\\
\tuplet{\alpha\,a,\beta,b,\sigma}&\sim
\tuplet{\id,a,\beta,b,s(\alpha)\circ\sigma}\\
\end{align*}
This reduces the number of elements to deal with to four.

So what makes this a simplicial object again? 
\begin{align*}
\dim\tuplet{\alpha,a,\beta,b,\sigma} &= \dom(\sigma)\\
\tuplet{\alpha,a,\beta,b,\sigma}\cdot\phi &= \tuplet{\alpha,a,\beta,b,\sigma\circ \phi}
\end{align*}

So that is what $D\otimes h$ looks like. Let's try to show that it is an acyclic cofibration.

\paragraph{The problem}
The codomain consists of those $\tuplet{a,\beta,b,\sigma}$ where $s\tuplet{\beta,b}\circ\sigma$ misses a point in $[\cod(\beta)]-\set b$.

The domain consists of those $\tuplet{a,\beta,b,\sigma}$ in the domain where $\sigma$ misses a point in $[\dom(\alpha)] -\set a$. This means that that point neither appears directly or as part of a tuplet in $s(\alpha,b)$. Note $\cod(\alpha) = \dom(\beta)$.

That is the analysis. Showing that this is a cofibration should be relatively straightforward. We already explained how to decide that an
is part of the domain and faces only stand out for being injective.

To show that the morphism is an acyclic cofibration, we divide the
codomain in stages, each of which can be shown to be pushouts of sums
of cofibrations. Here the pain starts.
\begin{itemize}
\item Stage zero is the domain. 
\item The next few stages add all faces that contain $a$. Sometimes this requires several steps of adding faces, going up the dimensions one-by-one. In other words, $\beta$ determines how many stages are needed.
\item The last few stages deal with cases where we are forced to work around $a$. Instead we use the tuplets in $S\tuplet{\beta,b}$ as points to work with.
Think subsets of $S\tuplet{\beta,b}$. In fact, that is what we replace the old faces with: subsets of this poset.
\end{itemize}

Perhaps tracking with more general posets and using mostly dimension to glue in new faces, is better way to make the construction understood.

\begin{align*}
U_i &= \set{x\of S\tuplet{\beta,b} | s\tuplet{\beta,b}(x) \neq i } \\
V_j &= \set{\lambda(x)\of S\tuplet{\beta,b} | x \neq j }\cup\set{\kappa(x)\of S\tuplet{\beta,b}| \forall k\of(\dom(\beta)-\set b). x_k\neq j } \\
W_{\kappa(p)} &= \set{\lambda(x)\of S\tuplet{\beta,b} | \beta(x) = b \vee x \leq p_{\beta(x)} }\cup\set{\kappa(x)\of S\tuplet{\beta,b}} \\
\end{align*}

The change now is that these aren't totally ordered sets. The starting point is the $\bigcup(U_i\cap V_j)$. The goal is $\bigcup(U_i)$. We start with gluing in all faces that contain the point $a$. Then we switch to the $\kappa(p)$ points if necessary.

\section{25/8/17}
What if the lexicographical product isn't a functor?
$\tuplet{0,1} < \tuplet{1,0}$
Suppose $\phi\of[1]\to[1]$ satisfies $\phi(x)=0$.
Since $\tuplet{\phi,\id}\tuplet{0,1}=\tuplet{0,1}>\tuplet{0,0} = \tuplet{\phi,\id}\tuplet{1,0}$.

Is this a problem for my construction?
\begin{itemize}
\item The functor $K$ of $\simCat$ would have to cover sufficiently many different cases to suffer from this problem.
\item A big part of the argument is an adjunction of functors at the slice category level.
\item The actual construction of the filler relies on the lexicographical
order.
\end{itemize}

What can we do now?
Take another route to $K_!$, and hopefully $K^*$, that doesn't go through $\simCat/[n]$.
There may be advantages to that.
Horns live in the categories of simplices, not in the slice category. That caused some awkwardness with having to prove that $K_!$ preserves intersections.
The lexicographical product is involved in the construction of the fillers, but it may not be that important.

\paragraph{back to the drawing board}
We replace $\xi\of\simplex[m]\to\simplex[n]$ with a \emph{space} that makes the simplices robust for pulling back along the horn. This is done
by adding supporting vertices for the simplices that would be cut out.

What is this space like?

The simplicial object $S\tuplet{\xi,k}\to\simplex[\cod(\xi)]$ confusingly must still consist of
pairs ${\phi,x}$ where $\phi$ is a morphism $[n]\to[\cod(\xi)]$. The $k'$ add room for elements that are at the same height.

We know that $S\tuplet{\delta^k,k} = \id$. No choice in that\dots
Lets probe: if $\xi'$ hits $k$, its companion should be able to pick one of the new edges there. Like $\phi_k\to \prod_{i\neq k} \xi_i$.

I know how many vertices I need. I know that the need to be above vertex $k$. I am unsure about the rest however.

The functorial setup was too restrictive, so while the number of edges is correct, we have to permit more higher dimensional simplicial sets.
I there are two obvious choices:
\begin{itemize}
\item allow every possible ordering of remaining egdes.
\item take the partial ordering that arises naturally.
\end{itemize}
The latter is more restrictive to let's stick with that one for now.

The ordering of $\xi_k + \product_{i\neq k}\xi_i$ is relevant as well.
We now allow simplices to jump from one set to the other in a specific order, which mean we glue the new faces to existing simplices above $k$.
Let's stick with adding the new faces in a specific place in the existing ordering.

\mathbfdef{supp}
We introduce a new partially ordered set $S\tuplet{\xi,k} = (s,\leq)$ where
\begin{align*}
s &= \dom(\xi) + \prod_{i\neq k} \xi_i\\
\supp(\lambda(x)) &= \xi(x) \\
\supp(\kappa(x)) &= k\\
\lambda(x) \leq \lambda(y) &\iff x\leq y \\
\kappa(x) \leq \kappa(y) &\iff x_i\leq y_i (\forall i\neq k)\\
\lambda(x)\leq \kappa(y) &\iff \xi(x) \leq k \\
\kappa(x) \leq \lambda(y) &\iff k < \xi(x)
\end{align*}

For $\phi:\xi\to \xi'$ the function $\phi\of S\tuplet{\xi,k} \to S\tuplet{\xi,k}$ we now let
\begin{align*} S\phi(\lambda(x)) &= \lambda(\phi(x)) & S\phi(\kappa(x)) = \kappa(\vec\phi(x)) \end{align*}
That way we indeed get a morphism of partially ordered sets.

Now the simplicial set we aim at is the \emph{nerve} of this partially ordered set.


\paragraph{back in the game?}

The left adjoint would be another tensor product divided by an equivalence relation. Perhaps we can even construct it in one go.
It kind of looks like using the nerves eliminates a lot of waste, meaning that we no long need the equivalence relations.

The descend functor should then be simpler as well. For $f\of X\to\horn_k[n]$
\[ \prod_\xi(\supp \backslash \xi \to X_\xi) \]
With the usual naturality constraint.

I got the feeling I am missing something.

Each $S\tuplet{\xi,k}$ is one representable, so the left adjoint
is forces to take every one of these in account.
It looks more like: 
\begin{align*}
\base(D\ri(f)) &= \set{ \tuplet{x,s} | x\of\dom(f),s \of \nu(S(f(x)))}/{\mathord\sim}\\
\textrm{where } & \tuplet{x\cdot\phi,s} \sim \tuplet{x,\nu(S(\phi))(s)}
\end{align*}
Here $\nu$ stands for the nerve, that adds many additional morphisms.

The right adjoint consists of natural transformations form this nerve.

This is nothing new. Ordinarily we'd take a functor $\simCat_{\set\geq}\to\ambient\s/\horn_{\set\geq}$ and spin of the adjunctions. Circumstances don't let this be a functor, however.

Profunctor like structures do it, but they must be internalized in
$\ambient$. That means we take $\horn_\leq$ and $\simplex_\leq$ and make
a bundle of sorts over them.

Suppose we re-imagine this as a morphism $K\to \base(\horn_{\set\geq}\times\simplex_{\set\geq})$ with lots of extra structure. This is where the nerve comes in.

That profunctor would look like this:
\begin{align*}
D &= \set{\tuplet{\beta,b,\sigma}|
\beta\of\Ar(\simCat),
b\of \cod(\beta),
s\tuplet{\beta,b}\circ \sigma\of \base(\horn_b)}\\
d_0(\tuplet{\sigma,\beta,b})&=\tuplet{s\tuplet{\beta,b}\circ\sigma,b}\\
d_1(\tuplet{\sigma,\beta,b})&=\tuplet{\beta,b}\\
\delta\cdot\tuplet{\sigma,\beta,b}&=
\tuplet{s(\delta)\circ\sigma,\beta\circ\delta,b}\\
\tuplet{\sigma,\beta,b}\cdot\gamma&=
\tuplet{\sigma\circ \gamma,\beta,b}
\end{align*}
In here, all the $s$'s are connected to the partially ordered sets above.
I am having great trouble getting this one right.

\newcommand\To{\mathbin\Rightarrow}
The descend functor applied to $f\of X\to \horn_{\set\geq}$ is 
$(D\To f)\of (D\To X) \to \simplex_{\set\geq}$.
\begin{align*}
\base(D\To X) &= \set{\tuplet{x,y}|
x\of D_y \to \base(X),
f\circ x = d_0,
\forall y,\phi.x(y)\cdot\phi = x(y\cdot \phi)}\\
& \textrm{where }D_y = \set{x\of D|d_1(x)=y}\\
(D\To f)\tuplet{x,y} &= y\\
\tuplet{x,y}\cdot\phi &= \tuplet{\lambda z.x(\phi\cdot z),y\circ\phi}
\end{align*}
The arrow mapping is relatively straight forward:
\[ (D\to m)\tuplet{x,y} = \tuplet{m\circ x, y} \]


Now that we have hidden the complexity of the nerve, this looks surprisingly simple.

The left adjoint for $f\of X\to \simplex_{\set\geq}$ is $D\otimes f \of D\otimes X \to \horn_{\set\geq}$.
\begin{align*}
\base(D\otimes X) &= \set{\tuplet{x,d}\of \base(X\times D)|f(x)=d_1(d)}/\sim\\
& \textrm{where }\tuplet{x\cdot\phi,d}\sim\tuplet{x,\phi\cdot d}\\
(D\otimes f)\tuplet{x,d} &= f(x)=d_1(d)\\
\tuplet{x,d}\cdot\phi &\sim \tuplet{x,d\cdot \phi}
\end{align*}
Now the arrow mapping satisfies:
\[ (D\otimes m)\tuplet{x,d} \sim \tuplet{m\circ x,d} \]
That $m$ is a morphism makes this work.


If I have done this right, this should be an adjunction. Moreover, it should be evident that the construction preserves modest sets, at least if finite object are modest.

\paragraph{The actual descent}
We can not simply work with 'an' acyclic cofibration. We need to take the family of all cofibrations is account. This may get confusing
We only find the family of horns in $\ambient\s/\set\geq\disc$. The functor $D\otimes$ lives on $\ambient\s/\simplex_{\set\geq}$. 
The problem object $P$ satisfies \[P = \set{\tuplet{\xi,k,l}|\xi\of\Ar(\simCat),k\of[\dom(\xi)],l\of[\cod(\xi)] }\] 
All we need to add to $P$ to get the family of all horn inclusions in the slice $\ambient\s/\simplex_{\set\geq}$ is $\simCat$ morphisms $\phi\to \dom\xi$.

A clearer definition:
\begin{align*}
\base(\simplex_P) &= \set{\tuplet{\alpha,a,\beta,b}| 
\alpha,\beta\of\Ar(\simCat),\cod(\alpha)=\dom(\beta),
a\of\cod(\alpha),b\of\cod(\beta)}\\
\base(\horn_P) &= \set{\tuplet{\alpha,a,\beta,b}\of \base(\simplex_P)|\alpha\of\base(\horn_a[\cod(\alpha)])}\\
\supp\tuplet{\alpha,a,\beta,b} &= \tuplet{\beta\circ \alpha,b}\\
\tuplet{\alpha,a,\beta,b}\cdot\phi &= \tuplet{\alpha\circ \phi,a,\beta,b}
\end{align*}

This provide two object and an inclusion in the slide category, to which we apply functor $D\otimes-$ above. And then we prove that the result is a discrete family of acyclic cofibrations.

We wind up with tuplets of five elements in $D\otimes \simplex_P$.
\begin{enumerate}
\item a morphism $\alpha$ that implements a category action.
\item a number $a\of\cod(\alpha)$, which tell us which horn we are trying to preserve.
\item a morphism $\beta$ with $\dom(\beta) = \cod(\alpha)$, which tell us about the target simplex. This hold the most data.
\item a number $b\of \cod(\beta)$ declaring which horn we want to pull back along.
\item a morphism $\sigma$ into the partially ordered object $S\tuplet{\beta\circ \alpha,b}$, which similarly to $\alpha$ is a target for the category action.
\end{enumerate}
The equivalence relation tells us that:
\begin{align*}
\tuplet{\alpha\circ\phi,a,\beta,b,\sigma}&\sim
\tuplet{\alpha,a,\beta,b,s(\phi)\circ\sigma}\\
\end{align*}
Note that $\alpha=\id$ is not (always) an option, though, because it isn't part of the horn.

So that is what $D\otimes h$ looks like. Good luck showing that it is an acyclic cofibration.

\section{11/8/17}
The biggest problem is the adjunction between $D$ and $K$ on $\ambient\s/\simplex_{\set\geq}$, methinks.
Perhaps the problem set is technically bigger, but conceptually, all we need there is a good story about \emph{powers} or \emph{tensors} and \emph{cotensors}.

We have a solid description of the representables of $\ambient\s/\simplex_{\set\geq}$, i.e. pairs $\tuplet{\xi\of\Ar(\simCat),k\of \cod(\xi)}$ with morphisms between the domains. It is a coproduct of categories, but vitally a indexed coproduct $\ambient$. Lets call this category $\cat P$ for now.

Proving generic statements is the right way to go. What works in the practice of computer programming, will work in the practice of theorem proving.

The have a functor $P\of \cat P\to\cat P$ with preserves intersections. This functor of representable induces an endo-adjunction of $\ambient\s/\simplex_{\set\leq}$, consisting for the covered functors $K\dashv D$. Of these $D$ is supposed to be the simplest, so let's start with $K$!

For an object $f\of X \to \simplex_{\set\geq}$ we seek an object $Kf\of KX\to \set \simplex_{\set\geq}$. We know that there won't be a direct construction, but that we first make two other object maps $K_1f$ and $K_2f$ and a pair of natural transformations $K_2f\to K_1f$ for which $Kf$ will be the coequalizer.

About $K_1f$: here $f$ produces $\tuplet{\xi,k}$, the underlying object. There is another bundle $b_1\of B_1\to \simplex_{\set\geq}$ where 
\begin{align*}
\base B_1 &= \set{\tuplet{\beta,\xi,k}| \cod(\beta) = \norm{\xi ,k} }\\
\dim(\tuplet{\beta,\xi,k}) &= \dom(\xi) \\
\tuplet{\beta,\xi,k}\cdot\phi &= \tuplet{K_1(\phi)\circ \beta \phi,\xi\circ \phi,k} \\
b_1(\tuplet{\beta,\xi,k}) &= \tuplet{\xi,k}
\end{align*}
Pulling back along $f$ generates the $K_1f$ object, but the structure is all wrong.

This would be amazing: an object $B$ such that $D = \cdot^B$ and $K =B \times \cdot$.
It won't work out that way because the structures are wrong. We might get a span of morphisms $c,d\of B\to \simplex_{\set\geq}$\dots
Surely it can't be proper morphisms though? What I have trouble with is the idea that we might be able to find a span of morphisms of simplices,
such that $K$ and $D$ are the result of pullbacks and pushouts along those morphisms. The changes in dimension are the clearest problem.
There must be two different simplicial structures on the same object to overcome that. 

The $K_2f$ is a more complicated variant, supposed to capture pairs of equivalent elements. Pairs of commutative triangles sharing a domain. Both embellished with an element of $f$, that becomes equal after restriction. This is supposed to tell us which members of $f\ri(B_1)$ to equate.

Forgetting structure is the goal. We know that $f$ can be represented as a coequalizer of coproducts of representables and its morphisms as well.
For this we might introduce the 'co-yoneda lemma' or something. Simpler yet: presumably we are dealing with internal projectives and coverings by those.
Now we get to a higher level of clarity, and completely loose track of the rest.

\paragraph{looking at simplicial sets differently}
The coequalizer of coproduct of representables suggests that all of our categories are exact completions of some sort, depending on how easily we can represent morphisms.

I thought I worked this out before. We look at $\ambient/\nno$, and then a monad on this category to get the option of sending a simplex to a degenerate simplex. The simplicial sets are algebras for the monad, while we are now looking at the Kleisli category, and hence the 'free objects' in a sense among the simplicial objects. I think these free object a projective in an enriched sense, i.e. the enrichment in ambient is regular in the covariant variable, if the contravariant is free. Yet it is possible to represent all objects as pseudoequivalence relations of free objects, and all morphisms as morphisms of the pseudoequivalence relations, by finding a particularly full covering (perhaps we are dealing with a 'resolvent embedding').

We can define the functor $K$ on the free objects, show that it preserves equivalence relations and use that to define the functor for all simplicial objects.
We still have nothing on $D$.

Precise generic statements.

\paragraph{back to $D$}
The construction of $D$ ought to be simpler, because a simplicial object is like a functor, and we just compose functors.
The representation we use is a complication, but only slightly so, I think.

Keep in mind that we combined to constructions to shorten the text. There is a perfectly ordinary adjunction giving by reindexing and its right adjoint, which unfortunately does not preserve model structures. We modify the model structure on one side and give adjoint endofunctors to connect the models structures.

Our presheaves are algebras for a monad in a slice of $\ambient$. The monad is similar to the monad belonging to a monoid action, but since the action doesn't preserve dimension, the action is invisible.

If we return to the presheaves over the full simplex, it look like we are just pulling back along a morphism of underlying objects, which is why $K$ must be like composing with the same morphism. In either case we need to do something about the lost monadic structure.

That is a good way to look at it\dots

Objects of $\ambient\s/\simplex_{\set\leq}$ are algebras for a monad on $\ambient/P$. There is a morphism $k\of P\to P$, and we define the functor $D$ be pulling back along this morphism. So what happens to the algebra structure then? There is a specific mapping:
\[ K_1\of \set{ \tuplet{\xi,k,\phi} | \cod(\phi)=\dim\tuplet{\xi,k} } \to \set{ \tuplet{\xi,k,\phi} | \cod(\phi) = \dim(K_0\tuplet{\xi,k}) } \]
With it help, we can show that the pullbacks have the same algebra structure.

The other direction is harder, because composing with $k$ doesn't preserve the algebra structure. However, we should be able to work with a quotient of the free algebra. Start with $f\of X\to P$:
\[ M(k\circ f) = \set{\tuplet{x,\phi}|\cod(\phi) = \norm{ f(x) }}\]
Now $\tuplet{x\cdot\phi,\chi} \sim \tuplet{x,K_1(\phi)\circ \chi}$. The structure of ambient is sufficient to provide a quotient $M(k\circ f)/\sim$, and morphisms factors nicely through these quotients, providing the sought after functor $K$.

Viewing slices of $\ambient$ as categories of algebras for various closely related looks smart. Maybe something to work into previous chapters of the paper.

For the adjunction, this is even better. The unit $g \to DKg$ is $\function y \tuplet{y,\id}$. It is probably an isomorphism.
The counit $KDf \to f$ is $\function{\tuplet{x,\phi}} x\cdot\phi$. Does that make sense?

The construction relies on a kind of factorization of $k\circ g$ through a morphism $Kg\of KY \to P$, where $KY$ is a suitable quotient of the free algebra.
$Df$ is simply a pullback. $Kg$ is the initial algebra through which $k\circ g$ factors. Clearly $g$ factors through $DKg$ due to the property of pullbacks, and $KDf$ through $f$ through initiality. Isomorphism $g\to DKg$ is equivalent to $K$ being fully faithful, which may help\dots Big factor is $k\of P\to P$ being monomorphic. Initiality is needed as well. For initiality $(Kg,Kh)\simeq (k\circ g,Kh)$, but $(k\circ g,Kh)\simeq (g,h)$ because $k$ is monic?

Why do I want $DKg\simeq g$ anyway? I want $h\ri(D(h_*f))\simeq f$. The morphism $k$ being an endomorphism of $h$ takes care of this.

\paragraph{Wider perspective}
The right adjoint allows us to descend morphisms along the family of horn inclusions.
It 'descends' in the sense that the right adjoint is right inverse to the reindexing functor.
To show that it preserves fibrations, we show that the left adjoint preserves cofibrations.

The further power/cotensor stuff is a way to proof this for all families of modest objects over all horns at once.
The extra parameter does little other than witness that everything what we do is generic. Make that two extra parameters,
because we also have to consider all possible lifting problems.

On the other hand, we already have the parameter of the horn we descend along, giving a grand total of three parameters.

So bring that down to one generic one $\norm:P\to \nno$, to start with.
This is enough. We can define the simplicial set, the monad and the adjunction.
No, don't go to general simplicial sets, stick to these 'projectives'.
Also consider that $k\of P\to P$ is a functor, but absolutely no morphism of simplicial sets.

This is good enough.
\begin{enumerate}
\item The first parameter is that of horns $H\to \nno$. This we need for defining our functor $k$.
\item The second parameter is that of lifting problems $L\to H\to \nno$. Not more complex, but for each pair of horns and each morphism of the codomains, we need a point to show preservation.
\item The third parameter is modest families $M\to H$. There is an object of modest families over horns. everything we have proved so far holds for this family. Importantly, closure under products suggest that modest sets survive descend.
\end{enumerate}
The third and second parameters have no direct relation. This is something to be wary of.

I don't feel like I have the perspective I need yet.

There is a nasty mismatch somewhere. The set $P$ may be our object of problems, but it isn't the underlying object of $\simplex_P$.
This confuses. 

Above, we are talking about simplicial objects. A simplicial object induces a category of elements. The morphisms are copied from $\simCat$. We define a functor $F$ and derive functors between the slice categories.
We can do this with any simplicial set and any functor of the elements. The slice categories have the benefit of a subtle form of completeness.

So what do we do exactly?
\begin{enumerate}
\item Show how functors between categories of elements induce adjoint pairs of functors between slice categories.
\item Define for each $p:P\to H$ such a $\simplex_P \to \simplex_P$. Let $L\subseteq H$ stand for the elements of horns, 
then we show that a composed left adjoint does preserve cofibrations.
\item Finally argue that all right adjoints preserve modest sets.
\end{enumerate}

Going from top to bottom:
Slice categories are categories of presheaves over internal categories of ambient and internal functor induce adjoints pairs of functor between slices.
The descend functor is composed of the direct image along the family of horn inclusions and reindexing along a specific endomorphism $k$ of $\simCat_P$. 
It therefore has left adjoint $K$. This left adjoint preserves discrete families of cofibrations, which makes $D$ preserve fibrations. direct images and reindexing both preserve modest families, hence $D$ does too.
\section{30/7/17}

There is a family of special fibration that withstand pulling back. The really hard part is connecting the descend to this family.

\paragraph{All problems}
The object of all problems is 
\begin{align*} 
P &= \set{\tuplet{\xi,k,l}|\xi\of\Ar(\simCat),k\of\dom(\xi),l\of\cod(\xi)}\\
p\tuplet{\xi,k,l} &= \tuplet{\dom(\xi),k}
\end{align*}
This is the one we want. The $p$ is the one we make the power over. The power is fine but the other object is much harder to do. The basis is still okay:
\[ q\tuplet{\xi,k,l} = \dom(\xi)+\norm\xi_l \]

The representables of $\ambient\s/\set\leq\disc$ are what I used as the key. That will work.

\section{28/7/17}
The global structure changes dramatically.

If $V$ is the universe, the morphism $\ambient\s/\nno\disc(\simplex_{\set\geq},V)\to \ambient\s/\nno\disc(\horn_{\set\geq},V)$ is a split epimorphism. 
The object $P=\ambient\s/\nno\disc(\horn_{\set\geq},V)$ is the object of lifting problems. By descending along $\horn_P\to \simplex_P$ we get where we want.
After we pin down what the descendant looks like, we just need to demonstrate that it is a modest assembly.
Here is where the real pain lies.

Fatten the simplex and then pull back. That is all we need to make things work.

Now the modesty is just in the way. All we really need is a grasp of the problem. 
All combinations.
Somehow just showing that horn inclusions are equivalences.

We make descend adjoint to a construction which is not the same as simply pulling back,
Although it comes close. Could we skip ahead and describe 

Nothing really changes about the structure of the proof.

\section{14/7/17}
Since $\ambient\s$ is sort of like a topos, we can represent its objects as coequalizers between sums of simplices. This representation allows us to extends any functor $K\of \simCat \to \simCat$ to a functor $\ambient\s\to\ambient\s$: the right Kan extension of $Y$ along $YK$ if $Y$ is the Yoneda embedding.
Technically we have a far larger class of lifting problems to address internally. We need a functor $\ambient\s/\simplex_{\set\leq}\to\ambient\s/\horn_{\set\leq}$, which has a right adjoint and which preserves cofibrations.

We can subdivide a little, and use the family of horn inclusion to define a model structure first.

\paragraph{recapitulate}
We need a lifting operator for the universe of modest objects. We realize it by descending fibrations along the family of horn inclusions. The descent operator must produce a fibration whose pull back is the original fibration. We turn this into a functor, which has a left adjoint, and then prove the left adjoint preserves cofibrations.

Ultimately we bring it down to a single family that is proven to be a family of cofibrations.

The descend construction itself matters very much and must be applicable to all modest fibrations.
Proving that the descended morphisms are fibrations is done by reducing the lifting problems of the descended morphisms to lifting problems of the original morphisms. This is what the left adjoint is useful for. Finally, 


For each $\xi\of [m]\to[n]$, $k\of[m]$ and $l\of[n]$ there is a strengthened cofibration 

\paragraph{strategy}
We want to put the family of horn inclusions central, so let's just rewrite the section that way, and see where we get stuck.





\section{30/6/17}
Left to do:
\begin{enumerate}
\item ensure that every proof of cofibrancy satisfies the new definition.
Done.

\item continue the other updates, namely the new family lifting property.
\item restructure the descend proof to be less hand-wavy as well.

\item make the proof that contractible morphisms are acyclic fibrations more readable.
\item surjective or epic in $\simCat$, make up your mind!
Epic is it.
\end{enumerate}


Technically $D\of \ambient\s/\simplex_{\set\leq} \to \ambient\s/\horn_{\set\leq}$.
The reason $D$ preserves cofibrations is that it is a 'partial' left adjoint $K$ that preserves acyclic cofibrations. It is in the wrong place to a 

The functor $D$ is indeed a Kan extension, but of a right adjoint to $K$.
That is how it preserves fibrations.

The problem object combines a morphism $\phi\of\simplex[m]\to\simplex[n]$ with horns at both simplices. Worse still, to prove that it has the lifting property, we need to split things up even further.

There is no Kan extension of $K$ along $\Delta$, but we can do every power and coequalizer.
These would be the enriched projectives and the things they cover.

Since we are working with enriched categories anyway, projective makes sense. The projectives of $\ambient\s$ in this sense and the objects that have a projective resolution permit the extension of $K$.

Projective resolutions of horns: the set of faces of codimension $1$ and a power of those of codimension $2$. Do these help in any way?

In any case, we can do the constructions with these objects,
and since the problem object is in here, we have enough to proof properties of $D$.

\paragraph{density}
Acyclic cofibrations are dense up to homotopy. I now expect no deeper relation between the descend construction of the paper and density or codensity monads than that.

The functor $(K_0,K_1)$ fails to be a monad because of the ordering we force on the supporting points. Without it, the reset of the construction doesn't work. But the ordering arbitrarily chosen to be the lexicographic one prevents a notion of bind.

Moving on: what about $D$? Left Kan extension of $K$ along $D$ anyone?

That makes it clearer why the projective thing would work out.
In that case the elements are 'nice colimits' of simplices, 
that can be replicated on the other side.

\paragraph{new setting}
Coproduct of categories over $\set\leq$. But then, we are considering simplicial object over other simplicial object, so there might be a more direct definition\dots

$D\of \ambient\s/\simplex_{\set\leq} \to \ambient\s/\horn_{\set\leq}$


\paragraph{projectives are cofibrants}
The category of projectives should be equivalent to the category $\cat P$ where objects are pairs $\tuplet{P,p\of P\to\nno}$ of objects and morphisms of $\ambient$, and where a morphism $\tuplet{P,p}\to \tuplet{Q,q}$ is a morphism $f\of P\to \times Q\times \Ar(\simCat)$ such that $f_1(x)\of [p(x)]\to [q(f_0(y))]$, i.e. like a tracked morphism in a sense.
Essentially, families of finite well orderings.

We can cover the family of horn inclusions with these, which is all we need.

Hey, notice something? Our cofibrations are projective morphisms in a suitably modified sense, just as intended. We have described cofibrant objects, which cover everything.

What we need however is the covering by regular epimorphisms, which may differ from that by acyclic fibrations. The 'latching' construction in the factorization proof. I get the feeling that the equivalence relation is already cofibrant. A tuplet $\tuplet{\epsilon_0,y_0,\epsilon_1,y_1}$ where $y_0\cdot\epsilon_0 = y_1\cdot\epsilon_1$, is nondegenerate if $(\epsilon_0,\epsilon_1)\of [a]\to[b]\times[c]$ is monic. Now we have an equivalence relation whose quotient is the original simplex.

I don't trust this. These structures aren't coproducts of simplices, like the projectives I look at before. So something is up.
Coverings with tensors of the family of simplices are everywhere though, so it may not be a great problem.

So $K$ does extends to all of $\ambient\s$. Every object is the quotient of a pseudoequivalence of cofibrant objects. The functor $K$ easily extends to cofibrants, and their quotients, hence all of $\ambient$. So $D$ has a proper left adjoint. This left adjoint has to send the family of horn inclusions to cofibrations.



\section{16/6/17}
What is the task that I have been postponing?
\begin{enumerate}
\item update the definition of cofibration once more, to say that the set of complementary faces covers the complement of the image.
\item ensure that every proof of cofibrancy also proves this extra condition.
\item continue the other updates, namely the new family lifting property.
\item prove anew that contractible morphisms are acyclic fibrations.
\item restructure the descend proof to be less hand-wavy as well.
\item epic vs surjective in $\simCat$--make up your mind.
\end{enumerate}

I tend to focus on the link between cofibrations and the saturated class of morphism generated from the family of cycle inclusions.
The recursive lifting constructions are a problem, however.

I keep missing what I really need, but degeneracy should be definite.

Suppose we definite degenerate as follows: $x=y\cdot\epsilon$ for a surjective $\epsilon$ such that $\epsilon\neq\id$.
Can we prove the current positive definition of face?
Suppose $x=x'\cdot\xi$ for some endomorphism $\xi$, but $x$ is nondegenerate. By em-factorization $x = x \cdot m(\xi)\cdot e(\xi)$, but now $\neg\neg(e(\xi)=\id)$, because of nondegeneracy, and $e(\xi) = \xi$ because equality between these morphisms is decidable.



\section{11/6/17}
Two approaches make sense. Add the condition that simplices are
generated or define acyclic cofibrations the hard way.
The latter doesn't make much sense.

We can glue in new faces. Therefore the condition that the decided
faces generate everything.

\section{5/6/17}
The lifting operator should be a family of morphism, otherwise
the piece-wise application doesn't make much sense.

Indeed, work with families of morphisms until the last step.

We have filler operators:
\[ f_n\of \hom(K_n,X)\times_{\hom(K_n,Y)}\hom(K_{n+1},Y) \to \hom(K_{n+1},X) \]
We define a new family of fillers using the following equations:
\begin{align*}
g_n &\of \hom(K_0,X)\times_{\hom(K_0,Y)}(\product{m\of\nno}\hom(K_m,Y))\to \hom(K_n,X)\\
g_0(a,b) &= a\\
g_{n+1}(a,b) &= f_n(g_n(a,b),b_{n+1})
\end{align*}
The $b$ must be a family as well and it probably must satisfy certain equations, like $b_0 = p\circ a$ and $b_{n+1}\circ c_n = b_n$.
So that is a factor.
Better yet $b\of K_\infty \to J$, etc.

The last step is a pushout to get to the cofibrations.

Rebuild the contractibles are acyclic proof. In need to reconsider the notation, but that can wait.

\paragraph{confusion}
I took for granted that the set of faces outside of the image of a cofibration is a set of generators, in the sense that each simplex is either part of the domain of the cofibration, or comes form one of the faces. Is it?

If we merely get a decidable subobject of generic simplices, do we get in trouble? Don't we also get the faces then?

Damage assessment:
\begin{enumerate}
\item we prove the decidability of the set of faces in order to show that acyclic fibrations are contractible.
\item the first factorization proof might actually become simpler
with a set of generators
\item the proof in the other direction is our problem now.
\item doesn't seem to come up futher down the road.
\end{enumerate}

So what would be the danger of switching to a decidable subject of generators?
So we loose decidability of genericity\dots do we need that?
Once again the uses are restricted to this section, where we are better of with simple generators!

A decidable set of generators. If we pull back a cofibration with this property, we get a new set of generators, hence no pain at all.

This is good.

I still feel like there is some danger. We cannot simply glue faces in and expect isomorphic results. I am afraid that some cofibrations are not going to be pushouts of powers of the family of cycles.

Why did I define cofibrations differently anyway?

Just adding the assumption that the set of faces outside of the image generates everything else corrects an oversight on my intuitions. It is probably provable that every simplex comes from a face using classical logic, by deriving a contradiction from the assumption that no restriction is nondegenerate.

The problem is equality. In a classical setting $j\cdot \xi = j$ is either true or false. This is a luxury we don't have here, so degeneracy is no decidable. This hurts us more often than expected: when we have a set of generators without the guarantee of non degeneracy, we can never get it back when we need it.

\section{4/6/17}
Let $c\of I\to J$ be a cofibration and let $\phi\of\base J\to\bool$ classify the subject of faces of $J$ that aren't faces of $I$.
Let $K\subseteq \nno\times J$ be the simplicial object that contain $\tuplet{n,j}$ if $\neq\phi(j\cdot\mu)$ for all monic $\mu$ with $\dom(\mu) > n$.
In other words, simplices are only admitted if all of their restrictions are either in $I$, degenerate or of dimension less than $n$.
Let $s\of K\to K$ be the map $\function{\tuplet{n,j}\of \nno\times K}\tuplet{n + 1,j}$ and use $b = \function i\tuplet{0,c(i)}\of I\to K$
The familiar part is proving the left lifting property for $\tuplet{b,s}\of I + K\to K$, as it is a pushout of a power of $\cycle_\nno \to \simplex_\nno$.
It feels stupid to need more than one pushout, but I am unsure what else to do.

The second part involves constructing a filler for $\function{\tuplet{n,i}\of \nno\disc\times I}\tuplet{n,c(i)}$ with induction.
The situation: $c=\tuplet{c_0,c_1}\of I + K\to K$ has the left lifting property. Now define $d\of\nno\disc\times I\to K$ recursively, by $d\tuplet{0,x} = c_0(x)$ and $d\tuplet{n + 1, x} = c_1(d(n,x))$. Then $d$ also has the left lifting property.

Suppose $f\of \hom(I+K,X)\times_{\hom(I+K,Y)}\hom(K,Y) \to \hom(K,X)$ is a filler operator for $c$ against $p$.
Define $g\of\hom(\nno\times I,X)\times_{\hom(\nno \times I,Y)}\hom(K,Y) \to \hom(K,X)$ as follows:
\begin{align*}
g(a,b) &= f(\tuplet{a_0,g(a_s,b)},b)\\
\end{align*}
That looks nice, but does it actually define a total function that satisfies the required equations?
The equation is correct, i.e. a function that satisfies it is a filler for $d$ against $p$. It does not define the function well, however.
This can be proved by induction I guess.

Assuming $\tuplet{n,j}\of\dom(g)$ for $n < m$, $\tuplet{m,j}\of\dom(g)$ because\dots this works out when $K$ is graded.

\section{2/6/17}
The goal is weighted coproducts. Now the discrete object are weighted coproducts of the terminal object, so that is a promising starting point.


The family lifting property is the normal lifting property in an alternative enrichment.

\paragraph{family lifting property}
The lifting property takes the enrichment as implicit parameter, but perhaps this should be an explicit parameter\dots
If there are a bunch of different enrichment, this might be a good idea.


I corrected the definition of fibration now. The next step involved adjusting the proves as well,
Especially 

\begin{itemize}
\item improve the definition of contractible as well.
\item use the new definition of fibrant and contractible in every proof.
\item replace coproducts with subobjects where possible.
\item track down where transfinite composition is used implicitly, make the argument explicit.
  * page 9, lemma 3.6 the end.	
\item try to get rid of transfinite compositions.
\end{itemize}

I updated the definition of lifting property with respect to a family. This permits a concrete way to write down certain proofs, which I am also introducing.
I do find that I remembered some forgotten aspects of earlier structures. As usual, my memory simplifies the proofs by erasing vital details, only hanging on to the general shape. Without these vital details some large scale restructuring becomes easy to imagine, but the chance that the new structure actually work becomes smaller.

I mean, I rediscovered the idea of an object of lifting problems, a vital detail that I didn't manage to put down clearly enough before, and gradually removed as I rewrote the paper. The same happened with transfinite compositions. I had them in a way that obscured their role in the central proofs. Now I miss them.

\section{26/5/17}

Transfinite compositions are not used explicitly anywhere, and don't seem like much of an addition.

Okay, suppose $f\of X\to X$ is a chain. Feels like the inclusion $X_0 \to X - f(X)$ should be the transfinite composition. Of course, $X - f(X)$ is not a simplicial set, unless we can adjust the restriction operator, but the existence of a transfinite composition suggest than we can.

Important change: rather than defining loose simplicial sets, I define the whole family in one go.
This may have impact on later parts of the paper.

Perhaps we better replace all coproducts with more direct definitions.

So now we have a longer to do list:
\begin{itemize}
\item repair found errors
\item don't use slice categories in the definition of enriched lifting\dots
\item replace coproducts with subobjects where possible.
\item track down where transfinite composition is used implicitly, make the argument explicit.
  * page 9, lemma 3.6 the end.
	
\item try to get rid of transfinite compositions.
\end{itemize}

Important insight: left adjoints preserve left lifting properties and right adjoint preserve right lifting properties. 
Hence the family lifting property reduces to the underlying lifting property!

What we needed comes from the enriched part of the definition! This is now very unclear.
Perhaps we need a lemma for this or something, but let's just see how far we get today.

As it stands, the text suggest that a lot of power comes from defining the lifting property in the slice category. It does not. 
There is an option to pull back morphism with left lifting property along \emph{discrete morphisms}, because of the enrichment. 
That is the power I wanted, and should be using explicitly throughout my proofs.

Another insight: the coproducts I seek are \emph{weighted coproducts}.

But something seems to be missing now: how to get weighted colimits of members of the family?

We are looking for a new proof of:
\begin{lemma} Contractible morphisms are acyclic fibrations.\end{lemma}
This seems a construction that actually breaks up the family filler operator internally.
We need to make the case that this is permitted somehow\dots
It doesn't follow from general rules about cofibrations. It must use discreteness somehow.

Actually, we should have argued that the enrichment is over $\ambient/\nno$.
That is where all problems seem to melt away.

Perhaps there is a trick that makes all individual inclusions retracts of the family. 
That might just be the most promising option.
The only trouble is $0\to 1$.


I have been needing a sum of hom objects, but got a product instead.
That is an error. However, when I have repaired the definition, then we have what we need everywhere.

This is applied stack semantics:
The slice $\ambient\s/I\disc$ is enriched over the slice $\ambient/I$: $\nat(X,Y)[i] = \nat(X[i],Y[i])$.

\paragraph{yet another def}

\begin{definition} A morphism $f\of X\to Y$ of $\ambient\s$ is a \keyword{fibration} it is has a \emph{pointwise} right lifting property with respect to the family of horn inclusions.

Let $\set\geq = \set{\tuplet{n,k}\of \nno\times\nno |n\geq k}$ in $\ambient$.
The simplicial set $\simplex_{\set\geq}$ satisfies:
\begin{align*}
\base(\simplex_{\set\geq}) &= \set{\tuplet{\phi,k}\of\Ar(\simCat)\times\nno| k\leq \cod(\phi) } \\
\dim\tuplet{\phi,k} &= \dom(\phi) \\
\tuplet{\phi,k}\cdot \xi &= \tuplet{\phi\circ\xi,k}
\end{align*}
The simplicial set $\horn_{\set\geq}$ satisfies:
\begin{align*}
\base(\horn_{\set\geq}) &= \set{(\phi,k)\of\Ar(\simCat)\times\nno\middle| 
\begin{array}{l}
k\leq \cod(\phi),\\
\exists i\of\nno.\left\{\begin{array}{l}i\leq \cod(\phi), i\neq k,\\ \forall j\of \dom(\phi).\phi(j)\neq i \end{array}\right. 
\end{array}
} \\
\dim\tuplet{\phi,k} &= \dom(\phi) \\
\tuplet{\phi,k}\cdot \xi &= \tuplet{\phi\circ\xi,k}
\end{align*}
The simplicial object $\horn_{\set\geq}$ is subobject of $\simplex_{\set\geq}$ by definition. 
The inclusion $\horn_{\set\geq}\to\simplex_{\set\geq}$ is the family of all horn inclusions.

The formula $\tuplet{\phi,k}\mapsto \tuplet{\dom(\phi),\cod(\phi),k}$ defines morphisms of simplices $\horn_{\set\geq}\to\set\geq\disc$ and $\simplex_{\set\geq}\to\set\geq\disc$ that commute with the inclusion, and make it a morphism in $\ambient\s/\set\geq\disc$. This category $\ambient\s/\set\geq\disc$ has an enrichment in $\ambient/\set\geq$, where $\nat(X,Y)$. If $\set\geq\ri(f)$ has the right lifting property with respect to the inclusion $\horn_{\set\geq}\to\set\geq\disc$ relative to the enrichment on $\ambient/\set\geq$.
\end{definition}

Perhaps this requires a new section, even if we use the notion only twice.

I suppose the family thing is quite clear and correct. But this enrichment stuff doesn't clear much up.
closer to the core, we could introduce a parametric variant of the enriched lifting property.

We could introduce the notion of lifting versus a discrete family from the start. 

Lifting discrete families as a core concept, to be introduced right after the enriched factorization system.

I know what I need, but as usual, it is a struggle to write down.

\section{28/4/17}
Dwelling on the contractible-cofibration factorization. The latching an matching elements evidently are part of fibrant and cofibrant replacements, and perhaps the proof becomes clearer if we somehow use the replacements first. I don't see it working however.

Plan: print out and check for mistakes; try to publish once again? At the same time, look for computer verification.


\section{24/3/17}
Two parts stay difficult to understand, because they generalize in the internal language.
\begin{itemize}
\item proposition on the factorization of $f$ as a contractible morphism following a cofibration.
\item fibrancy of the universal modest fibration
\end{itemize}

The trouble with the factorization must be that we need to show a filler operator for the family of cycles. Other than a rewording of the current text, I don't see much to improve here.

This whole part is based on Reedy's work, and it would be better to reflect that somehow.
I don't know how to do that yet.

\paragraph{Some observations on the relation with Reedy's work}
Reedy shows how a model structure on a small complete category can be lifted to functor categories. My starting point neither has a model structure, nor all colimits.
My construction combines the latching and the matching factorizations of the Reedy categories to yield only one of the factorizations of the model structure.
The latching part seem to ensure cofibrations, while the matching part ensures fillers.
The external induction hurts. Everything should be related to the internal natural number object.
Note that Reedy factorization is quite complicated, and the paper tries to skip to the result.

There is a factorization of morphisms in the ambient category based on decidable monomorphism following split epimorphisms.
Reedy's construction lifts this to the category of simplicial objects.
Cofibrations are decidable monomorphism lifted as Reedy defines.
Contractibles are split epi's lifted as Reedy defines.
It stands to reason that his proof could be useful, if it weren't for the external induction in it.

It is good to look up the definitions again, if only for the confirmation that the proof in the paper is not more complicated than necessary.

\section{10/3/17}
We are working out exactly what a \emph{horn or cycle filler} operator is, just like we worked out what a simplicial set is, in hopes of making the proof clearer and more convincing.

The lifting property is more demanding because it has to take all cases into account.
I work in all kinds of slice categories to hide to gory details, and keep track of additional requirement:
For a particular $f\of X\to Y$ and the family of horns $h\of D\to C$.
\begin{align*}
P &= \set{ \tuplet{a,b}\of(D\to X)\times(C\to Y)| f\circ a = b \circ h }\\
\dim(a(\tuplet{\phi,k})) &=\max(\cod(\phi))\\
\dim(b(\tuplet{\phi,k})) &= \max(\cod(\phi))\\
a(\tuplet{\phi,k})\cdot\chi &= a(\tuplet{\phi\circ \chi,k}) \\
b(\tuplet{\phi,k})\cdot\chi &= b(\tuplet{\phi\circ \chi,k}) \\
\end{align*}
\begin{itemize}
\item The cycle case is simpler, because we can drop the $k$-index.
\item The filler satisfies the same restrictions on dimensionality and restrictions, plus $c\circ h = a$ and $f\circ c = b$.
\end{itemize}

We now get a simplified notion of what a filler operator for both families are, and can try to rewrite the proofs in order to build exactly such an operator.

Suppose we work out an official definition of horn and cycle fillers. What might happen?
The step from the filler to lifting cofibrations may be less obvious, requiring some updates of the proofs and definition.
Not the acyclic though, just the weakly invertible.

\newcommand\HLP{\mathrm{HLP}}
\begin{definition}
Let  Let $f\of X\to Y$ be an arbitrary morphism of $\ambient\s$. The object of horn lifting problems is 
\[\HLP(f) = \set{\tuplet{a,b}\of \base X^D\times \base Y^C \middle|\begin{array}{l}
  f\circ a = b\circ h,\\
  \dim(b\tuplet{\phi,k}) = \max(\dom\phi),\\
  b\tuplet{\phi,k}\cdot\chi = b\tuplet{\phi\circ \chi,k},\\
	a\tuplet{\phi,k}\cdot\chi = a\tuplet{\phi\circ \chi,k}
\end{array}}\]
Here $h\of D\to C$ is the inclusion of the following objects in $\ambient$.
\begin{align*}
C &= \coproduct{\phi\of\Ar(\simCat)}\cod(\phi) \\
D &= \set{\tuplet{\phi,k}\of C \middle| \exists i\of\cod(\phi)-\set k. \forall j\of\dom(\phi).\phi(j)\neq i}
\end{align*}
A \keyword{horn filler} is a morphism $c\of\HLP(f)\to \base X^C$ that satisfies the following equations. 
\begin{align*} c\tuplet{a,b}\circ h &= a & f\circ c\tuplet{a,b} &= b \end{align*}
A \emph{fibration} of $\ambient\s$ is a morphism with a horn filler.
\end{definition}

%Cycle fillers 
\newcommand\CLP{\mathrm{CLP}}
\begin{definition}
Let $f\of X\to Y$ be an arbitrary morphism of $\ambient\s$. The object of cycle lifting problems is 
\[\CLP(f) = \set{\tuplet{a,b}\of \base X^D\times \base Y^C \middle|\begin{array}{l}
  f\circ a = b\circ h,\\
  \dim(b(\phi)) = \max(\dom\phi),\\
  b(\phi)\cdot\chi = b(\phi\circ \chi),\\
  a(\phi)\cdot\chi = a(\phi\circ \chi)
\end{array}}\]
Here $h\of D\to C$ is the inclusion of the following objects in $\ambient$.
\begin{align*}
C &= \Ar(\simCat) \\
D &= \set{\phi\of C \middle| \exists i\of\cod(\phi).\forall j\of\dom(\phi).\phi(j)\neq i}
\end{align*}
A \keyword{cycle filler} is a morphism $c\of\CLP(f)\to \base X^C$ that satisfies the following equations. 
\begin{align*} c\tuplet{a,b}\circ h &= a & f\circ c\tuplet{a,b} &= b \end{align*}
A morphism  of $\ambient\s$ is \emph{contractible} if it has a cycle filler.
\end{definition}

Where do we have problems with generalizations?
\begin{itemize}
\item proposition on the factorization of $f$ as a contractible morphism following a cofibration.
\item the triple lifting property. Improved now.
\item if $f$ and $g\circ f$ are contractible, then so is $g$. Improved now.
\item fibrancy of the universal modest fibration
\end{itemize}

\section{Triple lifting property}
We derive this from the equality of contractible and the acyclic fibrations. The core argument is that $\tuplet{f\to g}$ is a fibration if $f\of A\to B$ is a cofibration and $g\of X\to Y$ is a fibration, and contractible if $g$ is contractible or $f$ is acyclic. So how to define the horn and cycle fillers?

\[ \tuplet{f\to g} = \function{x\of X^B}\tuplet{g\circ x,x\circ f}\of X^B \to Y^B\times_{Y^A} X^A \]

Another approach is to take the pushout product of the families and construct the desired fillers there.

Take push out product of the family of horns with the family of cycles, then find a filler.
If $f$ is contractible, take the pushout product of the family of cycles with itself, and find a filler for that too.
Then use adjoints etc. to prove the lemma.
We may be able to pull it of without products, however. The triple lift for the families is a special case form which we derive all the special cases.

How far would we get with just the family of cycles along an (acyclic) cofibration?

The ultimate point is that we can fill the pushout product by systematically using fillers for simplices.
That algorithmic reduction of a triple lifting problem to a horn or cycle lifting problem can be done inside $\ambient$ to show that elementary triple lifting problems have a solution if horn or cycle lifting problems have. There rest is the reduction of the general triple lifting problem to the product of the families.

The reduction uses monotone monics $[m + n]\to[m]\times[n]$. 
We start with a collection of $[m+n-1]$-dimensional faces in the pushout product. Unless $m=0$ or $n=0$ we have no $[m+n]$ dimensional faces however. So these need to be glued in, one by one.
These can be lexicographically ordered again, after which we ensure that they get filled.
I.e. we build a sequence $A_i\to A_{i+1}$ of approximations and show that each requires a well defined application of the preexisting filler operator.
Clearly, the result is a proof in the same style as the descent proof, with one important difference: we don't rely on saturation, but an a filler operator to do the job.

\paragraph{set up for triple lift}
We need to fill $\simplex[m]\times \cycle[n]\cup \horn_k[m]\times\simplex[n]$. The first subdivision is along $\set{k}\times \simplex[n]$, whose point we will use as tops of horns to fill. The second subdivision is along $[m]-\set{k}$. We include down sets into each new $m+n$ dimensional face we glue in, until we are completes. The last subdivision is along dimension, as it seems we need face completion to get the required horns.

The main point of course is that we have a construction and therefore a filler operator that works on arbitrary horns.

Can we focus on greater collections than individual simplicies? At least in the intermediate steps we can\dots

\paragraph{considerations}
What matters for the case c-c-af is that the pushout product is a cofibration, which requires no reductions.
The cases c-ac-f and ac-c-f are where the reduction to the family of horns is needed.
Still, we should be comfortable with just the case of a pushout product of the family with an arbitrary cofibrations.

\paragraph{subdivisions}
We want to systematically subdivide the problem of filling
\[ A = \simplex[m]\times \cycle[n]\cup \horn_k[m]\times\simplex[n] \to \simplex[m]\times \simplex[n] \]
Damn this is hard.

Each monic $[m+n]\to [m]\times [n]$ must be glued in at some stage. This gluing in possible if we have a horn.
That is a base point $l$ such that the composition with monics $[m+n-1]\to [m+n]$ that hit $l$ have already been included at an earlier stage.

One thing we know: composition of these monotone monic with the projections $\to[m]$ an $\to[n]$ are surjective. Why?
By induction over $m+n$. Case 0 is trivial. Otherwise the second last element must be lesser in one of the variables,
hence inside the $m+n-1$ dimensional subsquares. The induction hypothesis makes the compositions of the submonic surjective. This forces $f(m+n) = (m,n)$, answering when either of those are hit.

What do we start with?
\begin{itemize}
\item All monics $[m+n-1] \to ([m]-\set{i})\times[n]$, where $i\neq k$.
\item All monics $[m+n-1] \to [m]\times ([n]-\set{j})$
\item No monics $[m+n-1] \to ([m]-\set{k})\times[n]$
\end{itemize}
For each face we glue in, the intersection with the previous complex cannot be a cycle however.
Given a supporting point, there can be no monics that omit it.
This is why the spine $\set{k}\times[n]$ is the unique supply of supporting points.

Monotone monics cannot meander. The set of elements that intersect the spin is always a simple interval.

What worries me is that adding any monic necessarily adds all the monics that miss each point along the spine.

Suppose $M_j$ consists of monics that intersect the $k$-spine in $j+1$ places. Is this the proper selection?
Do we every get any monics for free? I.e. without explicitly gluing them in?

Let's try the most difficult situation and hope for the best.

$M_{i,j}$ where $i\leq j\of[n]$ is the set of monotone monics that hit the points $(k,i)$ to $(k,j)$.
For gluing in $f$ we pick $(k,i)$ as top. Now $f\circ d_l$ for $l\neq k+i$ should already be present, while
$f\circ d_{k+i}$ should not.

We look for the first point where $f(k+j+n)_1 > j$ and swap all those points!?
Nope, we need to subdivide one step further.

Better approach: the 'distance' of two monotone monics is the number of places they don't coincide.
There is a specific monic that we start with, and then we progressively add in monics at greater distances.
Note the law $f(k)_0+f(k)_1=k$, which may be even better than out surjectivity claims.

So let's try again: $f_0(l) = \tuplet{l,0}$ if $l\leq k$, $f_0(l) = \tuplet{k,l-k}$ if $l$ is between $k$ and $k+n$, and 
$f_0(l) = \tuplet{l-n,n}$ if $l\geq n+k$. We gluing the faces in order of their distance (a number of steps from the basis figure)
to this monic. That way, we can rely on the overlap to prove required faces are present.

The only problem is choosing the base point is such a way that the opposing face is absent. Can we always do this?

Let $f$ be glued in, and $g$ be different from in in point $p\of[m+n]$. For $g\circ \partial_q$ if $q\neq p$ we know those faces are available.
We also need a base point, however. Some place where $f_0$ and $g_0$ are both $k$.
Then we note that all opposites to where $f_0=k$ have been added however\dots
What am I saying? All subfaces of $g$ are different from $f$ except $g\circ \partial_p$!

In general, the surjectivity ensures we can use the $k$-spine to glue in any face. What we need is the opposite:
a proof that the face opposing the chosen base point has not already been glued in!

So for $f$ let the least $p$ such that $f(p)_0=k$ be the base point. We would hate for $f\circ\partial_p$ to be present, and there is exactly one face that could case this tragedy: $f + (p \mapsto \tuplet{k-1,f_1(p)+1})$. Its least point is $p+1$, so that gives us a criterion for ordering faces: the least points that hit $k$ 

The existing subfaces seem like causes for $f\circ\partial_p$ existence, but that requires either coordinate of $f(p) = \tuplet{k,x}$ not to occur anymore.
In the first case, that forces $f(p-1)_0=k-1$ and $f(p+1)_0=k+1$, which is in the missing $([m]-\set k)\times [n]$ area. In the second, $f(p-1) = \tuplet{k,x-1}$, which means that $p$ is not the least point, contradicting an assumption. We in fact hardly notice the preexisting faces.

The main part is then 'face completion': we have a base point and dimension by dimension glue in the necessary faces, noting that we already have all the $[m+n-2]$ ones already.

\paragraph{Setting up again}
More analysis: every monic can be seen as a sequence of increments in either vertical or horizontal directions. Hence the number of monics is the old familiar:
\[ \left(\begin{array}{c}m+n\\n\end{array}\right) \] 
Everywhere a monic 'turns a corner', we can invert that corner to find another monic. This is an adjacent face. 

The main thing to worry about are the faces of $([m]-\set k)\times [n]$. This makes certain faces $[m+n] \to [m]\times [n]$ dangerous,
precisely the faces that only hit $k$ in one point. Perhaps those are the only ones to look out for, or perhaps we risk chocking of intermediate faces the same way if we don't tread carefully. This is all very unclear, but the reason seems to be that there is no best solution, rather than that it is hard to pick the right ordering.

If we gradually diminish the number of places $p$ where $f_0(p)=k$, we gradually glue in lower dimensional monics of $([m]-\set k)\times [n]$, which makes it more likely that wanted faces are available.

A smarter choice of base point revolves are the inversion of the corner. Now we know that the faces we want are already there\dots
So the base point should move around a lot, rather than stick to the $k$-spine.

There is a clear starting point:
\begin{align*}
f(p) &= \tuplet{p,0} & p&\leq k\\
f(k+p) &= \tuplet{k,p} & p&\leq n\\
f(k+n+p) &= \tuplet{k+p,n} & p&\leq m-k
\end{align*}
Then the ordering depends on how many points a monic has in common with this one. We can always invert the least point of difference, when a monic's turn comes up.

All monics are going to have two points in common: $(0,0)$ and $(m,n)$.
If a monic $g$ has only three point in common with $f$, could the third point be outside of the $k$-spine? 
Nope: $g(p)=\tuplet{k,p-k}$ somewhere, and $f(p)=\tuplet{k,p-k}$.

How do we glue in $f$?
There are at most two faces not already present: $f\circ d_k$ and $f\circ d_{k+n}$. If $k=0$ or $k=m$ this reduces to 1, which is ideal.
Otherwise we can first glue in $f\circ d_{k+n}$, and then proceed. I am unsure if this step is unavoidable.

We order the set of monics in such a way that a monic appears earlier in the ordering, if it has more points in common with $f$.
It is more difficult than that though

Inverting a point of difference will not always bring us back all the way to $f$. 
The following measure of distance is probably better:
\[ d(f,g) = \sum_{p\of[m+n]}| f_0(p)-g_0(p) | \]
It has the property that each inversion in the right direction bring a morphism closer to $f$.

In order to glue in a new face, we need a base point and all $(n+m-1)$-dimensional faces not containing that point.

Some of these faces are present in less distant faces\dots
Vertical or horizontal stretches do not present a problem if we pick a base point on the $k$-spine, because they are present in the starting material!
The are only three options. The submonic omits a vertical point, a horizontal point or is part of a face closer to $f$. Distance therefore does the trick.

So the matter of the actual ordering remains.

The choice model makes us think about the places where vertical moves happen: $n$ places to pick out of $m+n$ ones.
We subsequently make these choices, picking one element above the other, in each step leaving enough points to work with.
We could also consider the game of increasing distances. Where do you choose to deviate form $f$.
That way we can create an ordering based on partial distance sums, or the list of pointwise distances.

Subtracting $f_0-g_0$ give a list of number that we can order lexicographically, using an ordering on numbers, e.g. based on $|n+\epsilon|$ where $|\epsilon|<0.5$.
An this gives the ordering which we will use for the faces.


\section{Triple lifting}
The triple lifting lemma is the work horse of constructive homotopy theory. The purpose of this section is to convince you that this lemma is valid in the internal language $\ambient$, because it is constructive and predicative to a sufficient amount.

\begin{lemma}[Triple lifting property] Let $f\of A\to B$ and $g\of C\to D$ be cofibrations and let $h\of X\to Y$ be a fibration. Let $a\of A\times D\to X$, $b\of B\times C\to X$ and $c\of B \times D\to Y$ satisfy $a\circ(\id_A\times g) = b\circ(f\times \id_C)$, $h\circ a=c\circ(f\times \id_D)$ and $h\circ b=c\circ(\id_B\times g)$. If one of $f$, $g$ or $h$ is acyclic, then there is a $d\of B\times D\to X$ such that $d\circ(f\times\id_D)=a$, $d\circ(\id_B\times g)=b$ and $h\circ d = c$.
\[\xy
(0,20)*+{A\times C}="AC",(25,20)*+{B\times C}="BC",(40,20)*+{X}="X",
(0,0)*+{A\times D}="AD",(25,0)*+{B\times D}="BD",(40,0)*+{Y}="Y"
\ar^{f\times\id} "AC";"BC"
\ar_{\id\times g} "AC";"AD"
\ar_{f\times\id} "AD";"BD"
\ar^{a} "AD";"X"
\ar|(.6){\id\times g} "BC";"BD"
\ar^(.6){b} "BC";"X"
\ar@{.>}_{d} "BD";"X"
\ar_(.6){c} "BD";"Y"
\ar^{h} "X";"Y"
\endxy\]
\label{triple lift}
\end{lemma}

\begin{proof} 
Cut down the variety of lifting problems with the following strategies.
\begin{itemize}
\item Using symmetry, derive the cases where $g$ is acyclic from those where $f$ is.
\item By definition, there is an equivalence between lifting acyclic cofibrations and having a filler operator for the family of horns. Use this to reduce the cases where $f$ is acyclic to the case where $f$ is the family of horns.
\item By lemma \ref{Reedy}, there is an equivalence between lifting cofibrations and having a filler operator for the family of cycles. Use this to reduce the cases where $g$ is an arbitrary cofibration to the case where $g$ is the family of cycles and do the same for $f$.
\end{itemize}
These reductions can be proved with the \emph{pullback power} construction and some diagram chasing.
\[\xy
(34,20)*+{X^C}="top",(0,10)*+{X^D}="left",(24,10)*+{\bullet}="middle",(44,10)*+{Y^C}="right",(34,0)*+{Y^D}="bottom"
\ar^{X^g} "left";"top" \ar@{.>}|(.6){h^g} "left";"middle" \ar_{h^D} "left";"bottom" \ar "middle";"bottom"
\ar "middle";"top" \ar^(.6){h^C} "top";"right" \ar_(.6){Y^g} "bottom";"right"
\endxy\]
The triple lifting problem is equivalent to the simple lifting problem of $f$ against $h^g$.
This leaves two tasks.
\begin{enumerate}
\item Prove that if $h$ has a filler operator for cycles, it has a triple filler operator for the cases where $f$ and $g$ are both the family of cycles.
\item Prove that if $h$ has a filler operator for horn, it can also handle all triple lifting problems involving the family of horns $f$ and the family of cycles $g$.
\end{enumerate}

In both cases there is a subobject of $B\times D$ that is the pushout of $f\times C$ and $A\times g$, because the underlying monomorphisms of $f$ and $g$ are decidable.
\[ \set{\tuplet{x,y}\of B\times D\middle| (x\of f(A)) \vee (y\of g(C)) }\]
Since pushouts preserve left lifting properties, a filler operator for the pushout product is sufficient.

For $m > 0$ and $n > 0$ none of the faces of $\simplex[m]\times \simplex[n]$ belong to either $\simplex[m]\times \cycle[n]$ or $\horn_k[m]\times\simplex[n]$ for any $k\of[m]$, because the faces are $m+n$-dimensional, and the faces of either $\simplex[m]$ or $\simplex[n]$ are not. The cases where $m=0$ or $n=0$ are trivial because $\simplex[0] \simeq 1$, $\cycle[0]\simeq 0$ and $\horn_0[0]$ does not exist. Since the pushout product is a countable sum of these inclusions, it is a cofibration. This settles the case where both $f$ and $g$ are the family cycle inclusions, because $h$ is an acyclic fibration.

The case where $f$ is the family of horn inclusions is more complicated. Fortunately, this case is worked out in the proof of lemma A.1 in \citep{DD&DIS11}, where \emph{inner anodyne} is what this paper calls acyclic, and \emph{box product} is pushout product. Note that all necessary properties of simplices are decidable. Since the pushout product of $f$ and $g$ is an acyclic cofibration.
\end{proof}
\hide{perhaps we should adopt the same terms as that paper.}


\hide{ 
The case for $f$ acyclic seems simpler, but perhaps pushout products are not as ubiquitous as I thought. I don't see how we can decide if a degenerate simplex belongs to the image of a cofibration. The problem is determining that $x\cdot \phi = x$ for some $\phi\of[\dim x]\to[\dim x]$, since $=$ is not always decidable. This in turn that pushout products may not be available for all cofibrations.

The trick involves regularity: the family of faces exists internally, and therefore so does its union.

Not good enough! We would need a union of faces inside. We can create a 'least pseudo-complement'. 
}



\end{document}

