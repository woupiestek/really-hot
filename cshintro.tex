\documentclass[csh.tex]{subfiles}
\begin{document}


\section{Introduction}\hide{dump assemblies--write about simplicial homotopy}
This paper grew out of an attempt to build a \emph{recursive realizability} model for \emph{homotopy type theory}. The intention is to interpret types as the homotopy types of the simplicial objects in the \emph{category of assemblies}. What makes this challenging, is that this category lacks some of the structure of the category of sets that \emph{classical homotopy theory} is build on. In the internal logic the principle of the excluded middle and the axiom of choice are false. The category of assemblies is not exact and lacks infinite limits and colimits. While there are \emph{generic monomorphisms}, they are not subobject classifiers. I offer the following solutions.
\begin{enumerate}
\item Take the exact completion of the category of assemblies. This is not the effective topos but another realizability topos.
\item Limit the class of cofibrations. In classical simplicial homotopy theory every mono\-morphism is a cofibration. We demand that certain properties of the monomorphisms are decidable.
\item Strengthen the lifting property. Fibrations come equipped with a \emph{filler operator} that specifies a solution for each of the basic lifting problems.
\item Build the homotopy category out of fibrant objects only. This way we don't need the infinite colimits that make the small object argument of classical simplicial homotopy work.
\end{enumerate}
To avoid the distracting peculiarities of the category of assemblies and its exact completion this paper works with a generic \emph{$\Pi$-pretopos} with a \emph{natural number object} instead of the category of assemblies itself.

The paper works out suitable definition of fibrations, cofibrations and their acyclic counterparts (definitions \ref{Kan}, \ref{cofibration}, \ref{acyclic cofibration}) and proves that they form a model structure on the category of Kan complexes (theorem \ref{model category}). The last section confirms that certain universal fibrations actually live in the category of Kan complexes (theorem \ref{fibrant universe}). 

\subsection{Related literature}
Simplicial homotopy is the homotopy of simplicial sets. It is equivalent to the homotopy of CW complexes which are a category of topological spaces \citep{Hovey99,GJSHT}. The intended model is the \emph{ex/lex completion} \citep{MR1600009} of category of assemblies defined in \citep{MR1097022,MR1023803,MR2479466}. This completion is not the famous \emph{effective topos}, but it is another realizability topos. 

\section{Internal simplicial objects}
Internal simplicial homotopy has a notion of simplicial object of $\ambient$ which does rely on external $\ambient$-valued presheaves, but on internal structures.

\begin{definition} A \keyword{simplicial object} $X$ is a triplet $\tuplet{\base X, \dim, \cdot}$ where $\base X$ is an object of $\ambient$, $\dim$ is a morphism $\base X\to \nno$. The operator $\cdot$ is has the following properties. Let $\Ar(\simCat)$ be the object of non decreasing functions between decidable, finite and inhabited initial segments of the natural numbers. The domain $\dom(\cdot)$ of $\cdot$ is the following object. 
\[ \set{\tuplet{x,\xi}\of \base X\times \Ar(\simCat)\middle| \dim(x) = \max(\cod(\xi))}\]
The codomain $\cod(\cdot)$ of $\cdot$ is $\base X$. The operator $\cdot$ satisfies the following equations.
\begin{align*}
\dim(x\cdot\xi) &= \max(\dom(\xi))\\
x\cdot \id &= x \\
x\cdot(\alpha\circ\beta)&=(x\cdot\alpha)\cdot\beta 
\end{align*}

A \emph{morphism of simplicial objects} $X\to Y$ is a morphism $f\of\base X\to\base Y$ which commutes with $\dim$ and $\cdot$. The object of morphisms $X\to Y$ in $\ambient$ itself is $\nat(X,Y)$. It represents families of morphisms $X\to Y$, i.e. for each object $I$ of $\ambient$ there is a natural bijection between morphisms $I\to \nat(X,Y)$ and morphisms $I\times X\to Y$ which commute with $\dim$ and $\cdot$ and their $\id_I$-fold multiples.
\end{definition}

This definition is consistent with the definition of initial presheaves in \citep{MR1300636}. The definition is valid because $\ambient$ is an $\Pi$-pretopos with a natural number object $\nno$. Decidable, finite and inhabited initial segments of the natural numbers have a classifier.
\[  \lambda\tuplet{i,j}.j\of\set{\tuplet{i,j}\of\nno\times\nno\middle|i\leq j}\to \nno \]
The relation $\leq$ is decidable, and comprehension on decidable predicates to define subobjects in $\ambient$, because there are pullbacks and classifiers of decidable subobjects $1\to \bool = 1+1$. Here $1$ is a terminal object and $+$ a binary coproduct.

Local Cartesian closure means that there is an object $A$ of morphisms between the initial segments. Local Cartesian closure also implies that there is a subobject of non decreasing morphisms $\Ar(\simCat)$.
\[ \Pi f\of A,i,j\of\nno,x\of\set{y\of 1|i\leq j}.\set{y\of 1|f(i)\leq f(j)}\]
However, because $\ambient$ is also exact and extensive, it is a Heyting category, so the same subject has a more familiar definition.
\[ \Ar(\simCat)=\set{f\of A|\forall i,j\of\nno.i\leq j \to f(i)\leq f(j)} \]

\begin{definition} This object is the object of arrows of of the \emph{internal category of simplices} $\simCat$, whose object of objects $\Ob(\simCat)$ is $\nno$. The category of \emph{simplicial objects and morphisms} of $\ambient$ is $\ambient\s$.
\end{definition}

\begin{remark} We assume that all of the structure on $\ambient$ comes from functors. So several functors between categories related to $\ambient$ has right adjoint that give $\ambient$ its limits and exponentials and some functor have left adjoint that give ambient colimits. Definitions in terms of universal properties only define objects up to isomorphism. Our assumption ensures that there are functors that hit all the necessary isomorphism classes, when we only specify a functor up to isomorphism.
\end{remark}

We internalize the lifting properties to define Kan complexes with as follows.

\begin{definition}
A morphism $f\of X\to Y$ of simplicial object has the \emph{right lifting property} with respect to a morphism $g\of I\to J$--and $g$ has the \emph{left} lifting property with respect to $f$--if the morphism $\tuplet{f_!,g\ri} = \tuplet{\nat(\id_J,f),\nat(g,\id_X))}$ 
which is the factorization of the span $\nat(\id_J,f)$, $\nat(g,\id_X)$ through the pullback cone of $\nat(\id_I,f)$ and $\nat(g,\id_Y)$
is a \emph{split} epimorphism.
\[\xy
(34,20)*+{\nat(I,X)}="top",(0,10)*+{\nat(J,X)}="left",(24,10)*+{\bullet}="middle",(44,10)*+{\nat(I,Y)}="right",(34,0)*+{\nat(J,Y)}="bottom"
\ar^{\nat(g,\id_X)} "left";"top" \ar@{.>}|(.6){\tuplet{f_!,g\ri}} "left";"middle" \ar_{\nat(\id_J,f)} "left";"bottom" \ar "middle";"bottom"
\ar "middle";"top" \ar^(.6){\nat(\id_I,f)} "top";"right" \ar_(.6){\nat(g,\id_Y)} "bottom";"right"
\endxy\]
A section of $\tuplet{f_\bang,g\ri}$ is a \emph{filler operator}.\label{lifting}
\end{definition}

This version of the lifting property is powerful enough to lift arbitrary families of morphism both internal and external.

\subsection{Summary}
For completeness we not that $\ambient$ being \emph{$\Pi$-pretopos} means all of the following.

\begin{enumerate}
\item The category $\ambient$ is \emph{locally Cartesian closed}. This means that for each object $X$ of $\ambient$ each slice $\ambient/X$ is Cartesian closed.
\item The category $\ambient$ is \emph{extensive}, which means that is has finite coproducts and that $\ambient/(X+Y)$ is equivalent to $(\ambient/X)\times(\ambient/Y)$ for each pair of objects $X$ and $Y$ of $\ambient$.
\item The category $\ambient$ is \emph{exact} in the sense of Barr. This means that all weak groupoids (see definition \ref{weak groupoid}) have coequalizers, and that those coequalizers are stable under pullback.
\end{enumerate}

\begin{definition} A \keyword{weak groupoid} consists of a pair of objects $X_0$, $X_1$ and morphisms $r\of X_0\to X_1$ and $s,t\of X_1\to X_0$ such that $s\circ r= t\circ r = \id_{X_0}$ such that for each $x,y,z\of X_0$ if two of $\tuplet{x,y}$, $\tuplet{x,z}$ and $\tuplet{y,z}$ are in the image of $\tuplet{s,t}\of X_1\to X_0\times X_0$, the third is too. A \emph{coequalizer} for a weak groupoid is a coequalizer of $s$ and $t$.
\end{definition}

\begin{example} Every topos is a $\Pi$-pretopos so $\ambient$ can be any topos with a natural number object like the topos of sets. \end{example}

The category $\ambient$ is has a \emph{natural number object}. To keep track of the distinction between internal and external natural numbers, let \emph{set} of natural numbers be $\N$, and use $i\in \N$ to indicate membership. The natural number object of $\ambient$ is $\nno$ and $i\of\nno$ means that $i$ is a morphism with codomain $\nno$.

This combination of properties implies the following.
\begin{enumerate}
\item The category $\ambient$ has all colimits and that reindexing functors preserve them. 
\item The category $\ambient$ is a \emph{Heyting category}. This means that for each object $X$ the poset of subobjects $\sub(X)$ is a Heyting algebra and that for each $f\of X\to Y$ the preimage map $f\ri\of\sub(Y)\to\sub(X)$ is a morphism of Heyting algebras.  
\end{enumerate}

\end{document}